/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[15],{324:function(Da,ta,aa){function oa(h,z,ca){z.endsWith("/")||(z+="/");ca=ca||{};var ha=ca.disableWebsockets||!1;this.ZM=ca.singleServerMode||!1;null!=ca.customQueryParameters&&Object(n.b)("wvsQueryParameters",ca.customQueryParameters);z.endsWith("blackbox/")||(z+="blackbox/");this.zk=ca.uploadData||null;this.ws=ca.uriData||null;this.DG=ca.cacheKey||null;this.mK=ca.officeLocale||null;this.uz=Object(f.a)(z,null,ha);this.Oe=z;this.Iz=
h;this.le=null;this.Ch=ja();this.Gj=ja();this.pu=!1;this.Ue=this.Vc=this.jd=this.Vd=null;this.qe=[];this.Tu=[];this.cache={};this.timeStamp=0;this.Ie=[];this.Kf=[];this.Xz=null;this.Dz=!1;this.KC=this.id=null;this.AB=this.dJ=la;this.Rw=0;this.RA=!1;this.MZ=1;this.Wv={};this.Po(!0)}function ja(){var h={promise:null,resolve:null,reject:null,state:0,result:null,request:null,co:function(){return 1===(h.state&1)},NY:function(){return 2===(h.state&2)},tg:function(){return!h.NY()&&!h.co()},uY:function(){return 4===
(h.state&4)},pM:function(){h.state|=4}};h.promise=new Promise(function(z,ca){h.resolve=function(){if(0===h.state||4===h.state)h.state=1,h.result=arguments[0],z.apply(null,arguments)};h.reject=function(){if(0===h.state||4===h.state)h.state=2,ca.apply(null,arguments)}});return h}function la(){return!1}function da(h,z,ca){if(!(z in r))return!0;z=r[z];for(var ha=0;ha<z.length;ha++){var ea=h;var ia=z[ha];var fa=ca;if(ia.name in ea){var pa="",wa=!1;ea=ea[ia.name];switch(ia.type){case "s":pa="String";wa=
Object(y.isString)(ea);break;case "a":pa="Array";wa=Object(y.isArray)(ea);break;case "n":pa="Number";wa=Object(y.isNumber)(ea)&&Object(y.isFinite)(ea);break;case "o":pa="Object",wa=Object(y.isObject)(ea)&&!Object(y.isArray)(ea)}wa||fa.reject('Expected response field "'+ia.name+'" to have type '+pa);ia=wa}else fa.reject('Response missing field "'+ia.name+'"'),ia=!1;if(!ia)return!1}return!0}aa.r(ta);var y=aa(0);aa.n(y);var x=aa(1);Da=aa(40);var w=aa(32),f=aa(341),a=aa(65),e=aa(268),b=aa(84),n=aa(35),
ba=aa(119),r={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}]};oa.prototype=Object(y.extend)(oa.prototype,{ZT:function(){var h=this;
return new Promise(function(z,ca){var ha=new XMLHttpRequest;ha.open("GET",h.Oe+"ck");ha.withCredentials=h.Nl();ha.onreadystatechange=function(){ha.readyState===XMLHttpRequest.DONE&&(200===ha.status?z():ca())};ha.send()})},T2:function(h,z){this.dJ=h||la;this.AB=z||la},TG:function(){var h=this;this.Gj=ja();this.Ch=ja();return this.uz.Oz().then(function(){h.pu=!1;h.id=null;h.Dz=!1;return h.ZT()})},AC:function(){this.dJ();this.eB();this.Vd&&(this.Vd.tg()?this.me(this.Vd.request):this.Vd.co()&&this.AB(this.Vd.result.url,
"pdf")&&(this.Vd=null,this.TL()));this.Ue&&this.Ue.tg()&&this.me(this.Ue.request);this.jd&&this.jd.tg()?this.me(this.jd.request):this.Vc&&this.Vc.tg()&&this.UI(this.Vc.request);var h;for(h=0;h<this.Ie.length;h++)this.Ie[h]&&this.Ie[h]&&(this.Ie[h].tg()?this.me(this.Ie[h].request):this.Ie[h].co()&&this.AB(this.Ie[h].result.url,"image")&&(this.Ie[h]=null,this.Pw(h)));for(h=0;h<this.Kf.length;h++)this.Kf[h]&&this.Kf[h]&&this.Kf[h].tg()&&!this.Kf[h].uY()&&this.me(this.Kf[h].request);for(h=0;h<this.qe.length;h++)this.qe[h]&&
this.qe[h].tg()&&this.me(this.qe[h].request)},eB:function(h){var z=this;this.pu||(this.timeStamp=Date.now(),this.uz.gD(function(ca){z.a_(ca)},function(){return null},function(){return null},!0).then(function(){clearInterval(z.Hw);z.Hw=null},function(ca){z.pu=!1;if(!z.Hw){var ha=0;z.Dz=!0;z.KC=0;z.Hw=setInterval(function(){2>ha++?z.AC():(clearInterval(z.Hw),h&&h.reject(b.a),Object(x.f)("WebViewerServer connection failed:"+ca))},5E3)}}),this.pu=!0)},S4:function(){var h=this,z=createPromiseCapability();
if(this.zk){var ca=new FormData;ca.append("file",this.zk.fileHandle,this.zk.fileHandle.name);var ha=this.zk.loadCallback;var ea="upload";var ia=this.zk.extension}else if(this.ws){ca={uri:this.ws.uri,Faa:this.ws.shareId};ca=Object.keys(ca).map(function(ka){return ka+"="+(ca[ka]?encodeURIComponent(ca[ka]):"")}).join("&");var fa="application/x-www-form-urlencoded; charset=UTF-8";ha=this.ws.loadCallback;ea="url";ia=this.ws.extension}else return Promise.resolve();var pa=new XMLHttpRequest,wa=Object(w.g)(h.Oe,
"AuxUpload");wa=Object(ba.a)(wa)+"&type="+ea+"&ext="+ia;pa.open("POST",wa);pa.withCredentials=this.Nl();fa&&pa.setRequestHeader("Content-Type",fa);pa.addEventListener("load",function(){if(pa.readyState===pa.DONE&&200===pa.status){var ka=JSON.parse(pa.response);h.Iz=ka.uri;ha(ka);z.resolve(ka)}});pa.addEventListener("error",function(){z.reject(pa.statusText+" "+JSON.stringify(pa))});this.zk&&null!=this.zk.onProgress&&(pa.upload.onprogress=function(ka){h.zk.onProgress(ka)});pa.send(ca);return z.promise},
L1:function(h){this.password=h||null;this.Ch.co()||(this.Ch=ja(),this.me({t:"pages"}));return this.Ch.promise},Tr:function(h){this.Xz=h||null;this.Ch.co()||(this.eB(this.Ch),this.me({t:"pages"}));return this.Ch.promise},WG:function(h){h=Object.assign(h,{uri:encodeURIComponent(this.Iz)});this.Xz&&(h.ext=this.Xz);this.le&&(h.c=this.le);this.password&&(h.pswd=this.password);this.DG&&(h.cacheKey=this.DG);this.mK&&(h.locale=this.mK);return h},me:function(h){h=this.WG(h);this.uz.send(h)},ni:function(h){return h},
a_:function(h){var z=this,ca=h.data,ha=h.err,ea=h.t;switch(ea){case "upload":ha?z.T4.reject(ha):z.T4.resolve("Success");break;case "pages":ha?z.Ch.reject(ha):da(ca,ea,z.Ch)&&z.Ch.resolve(ca);break;case "config":ha?z.Gj.reject(ha):da(ca,ea,z.Gj)&&(ca.id&&(z.id=ca.id),ca.auth&&(h=Object(n.a)("wvsQueryParameters"),h.auth=ca.auth,Object(n.b)("wvsQueryParameters",h)),ca.serverVersion&&(z.j5=ca.serverVersion,Object(x.g)("[WebViewer Server] server version: "+z.j5)),ca.serverID?(z.Rw=ca.serverID===z.KC&&
z.RA?z.Rw+1:0,z.KC=ca.serverID):z.Rw=0,z.RA=!1,z.Gj.resolve(ca));break;case "health":ha?z.Gj.reject(ha):da(ca,ea,z.Gj)&&(ca=ca.unhealthy,z.ZM&&ca?Object(x.i)("Server failed health check. Single server mode ignoring check."):!z.C7&&ca&&1>=z.Rw&&(z.RA=!0,z.TG().then(function(){z.AC()},function(){z.AC()})));break;case "pdf":ca.url=Object(ba.a)(z.Oe+"../"+encodeURI(ca.url));ha?z.Vd.reject(ha):da(ca,ea,z.Vd)&&z.Vd.resolve(ca);break;case "docmod":ca.url=Object(ba.a)(z.Oe+"../"+encodeURI(ca.url));ha?z.Wv[ca.rID].reject(ha):
da(ca,ea,z.Vd)&&z.Wv[ca.rID].resolve(ca);break;case "xod":if(ha)this.jd&&this.jd.tg()&&this.jd.reject(ha),this.Vc&&this.Vc.tg()&&this.Vc.reject(ha);else if(ca.notFound)ca.noCreate||this.jd&&this.jd.tg()&&this.jd.resolve(ca),this.Vc&&this.Vc.tg()&&this.Vc.resolve(ca);else{ca.url&&(ca.url=Object(ba.a)(z.Oe+"../"+encodeURI(ca.url)));if(!this.Vc||this.Vc.co())this.Vc=ja(),this.Vc.request={t:"xod",noCreate:!0};this.jd||(this.jd=ja(),this.jd.request={t:"xod"});this.Vc.resolve(ca);this.jd.resolve(ca)}break;
case "annots":if(ha)z.Ue.reject(ha);else if(da(ca,ea,z.Ue)){z.Ue.pM();var ia=new XMLHttpRequest;h=z.Oe+"../"+encodeURI(ca.url);var fa=ca.hasAppearance?Object(ba.a)(h+".xodapp"):null;ia.open("GET",Object(ba.a)(h));ia.responseType="text";ia.withCredentials=this.Nl();ia.addEventListener("load",function(){ia.readyState===ia.DONE&&200===ia.status&&z.Ue.resolve({ED:ia.response,qG:fa})});ia.addEventListener("error",function(){z.Ue.reject(ia.statusText+" "+JSON.stringify(ia))});ia.send()}break;case "image":var pa=
this.Ie[ca.p];ha?pa.promise.reject(ha):da(ca,ea,pa)&&(pa.result=ca,pa.result.url=Object(ba.a)(z.Oe+"../"+encodeURI(pa.result.url)),pa.resolve(pa.result));break;case "tiles":pa=ca.rID;h=this.qe[pa];this.qe[pa]=null;this.Tu.push(pa);if(ha)h.reject(ha);else if(da(ca,ea,h)){for(ha=0;ha<ca.tiles.length;ha++)ca.tiles[ha]=Object(ba.a)(z.Oe+"../"+encodeURI(ca.tiles[ha]));h.resolve(ca)}break;case "text":pa=this.Kf[ca.p];if(ha)pa.reject(ha);else if(da(ca,ea,pa)){pa.pM();var wa=new XMLHttpRequest;ca=Object(ba.a)(z.Oe+
"../"+encodeURI(ca.url));wa.open("GET",ca);wa.withCredentials=this.Nl();wa.addEventListener("load",function(){wa.readyState===wa.DONE&&200===wa.status&&(pa.result=JSON.parse(wa.response),pa.resolve(pa.result))});wa.addEventListener("error",function(ka){pa.reject(wa.statusText+" "+JSON.stringify(ka))});wa.send()}break;case "progress":"loading"===ca.t&&z.trigger(a.a.Events.DOCUMENT_LOADING_PROGRESS,[ca.bytes,ca.total])}},gI:function(){this.eB(this.Gj);return this.Gj.promise},VV:function(){this.Ue||
(this.Ue=ja(),this.Ue.request={t:"annots"},this.me(this.Ue.request));return this.Ue.promise},Pw:function(h){this.Ie[h]||(this.Ie[h]=ja(),this.Ie[h].request={t:"image",p:h},this.me(this.Ie[h].request));return this.Ie[h].promise},M1:function(h){this.Kf[h]||(this.Kf[h]=ja(),this.Kf[h].request={t:"text",p:h},this.me(this.Kf[h].request));return this.Kf[h].promise},N1:function(h,z,ca,ha){var ea=this.qe.length;this.Tu.length&&(ea=this.Tu.pop());this.qe[ea]=ja();this.qe[ea].request={t:"tiles",p:h,z:z,r:ca,
size:ha,rID:ea};this.me(this.qe[ea].request);return this.qe[ea].promise},TL:function(){this.Vd||(this.Vd=ja(),this.Vd.request={t:"pdf"},this.Dz?this.Vd.resolve({url:this.Iz}):this.me(this.Vd.request));return this.Vd.promise},uI:function(h){var z=this,ca=new XMLHttpRequest,ha=Object(ba.a)(this.Oe+"aul")+"&id="+this.id,ea=new FormData,ia={};h.annots&&(ia.annots="xfdf");h.watermark&&(ia.watermark="png");h.redactions&&(ia.redactions="redact");ia={t:"docmod",reqID:this.MZ++,parts:ia};h.print&&(ia.print=
!0);var fa=this.WG(ia);ea.append("msg",JSON.stringify(fa));return Promise.all([h.annots,h.watermark,h.redactions].map(function(pa){return Promise.resolve(pa)})).then(function(pa){var wa=pa[0],ka=pa[1],va=pa[2];wa&&ea.append("annots",wa);ka&&ea.append("watermark",pa.watermark);va&&ea.append("redactions",va);z.Wv[fa.reqID]=ja();ca.open("POST",ha);ca.withCredentials=z.Nl;pa=new Promise(function(sa,xa){ca.onreadystatechange=function(){4===ca.readyState&&(200===ca.status?sa():xa("An error occurred while sending down annotation data to the server"))}});
ca.send(ea);return pa.then(function(){return z.Wv[fa.reqID].promise})})},UI:function(){this.Vc||(this.Vc=ja(),this.Vc.request={t:"xod",noCreate:!0},this.me(this.Vc.request));return this.Vc.promise},O1:function(){this.jd||(this.jd=ja(),this.jd.request={t:"xod"},this.me(this.jd.request));return this.jd.promise},mk:function(){return!0},request:function(){},oL:function(){},abort:function(){for(var h=0;h<this.qe.length;h++)this.qe[h]&&(this.qe[h].resolve(null),this.qe[h]=null,this.Tu.push(h));this.close()},
Ww:function(h){this.le=this.le||{};this.le.headers=h},C8:function(){return this.le?Object(y.omit)(this.le.headers,["Cookie","cookie"]):null},Po:function(h){this.le=this.le||{};this.le.internal=this.le.internal||{};this.le.internal.withCredentials=h},Nl:function(){return this.le&&this.le.internal?this.le.internal.withCredentials:null},getFileData:function(){return Promise.reject()}});Object(Da.a)(oa);Object(e.a)(oa);Object(e.b)(oa);ta["default"]=oa},341:function(Da,ta,aa){function oa(x,w,f){function a(b,
n){function ba(va){h().then(function(sa){fa&&!pa?setTimeout(function(){ba(va)},1):sa.send(JSON.stringify(va))})}function r(va,sa,xa,za){var ua=window.createPromiseCapability(),Aa=!1,Ea=ua;ha=va;ea=sa;ia=xa;ca=null;za&&(va=Object(da.a)("wvsQueryParameters"),va.bcid=Object(la.h)(8),Object(da.b)("wvsQueryParameters",va));try{va=wa?ka+"/"+wa:ka+"/ws";va=Object(y.a)(va);var Ia=new WebSocket(va);Ia.onopen=function(){ua.resolve();Aa=!0;ua=null;fa=!1;z.resolve(Ia);ea&&ea()};Ia.onerror=function(Pa){fa=pa=
!0;ua&&ua.reject(Pa);ca&&ca.reject()};Ia.onclose=function(){z=window.createPromiseCapability();fa=!0;ca||(ca=window.createPromiseCapability());ca.resolve();ia&&ia();ha&&Aa&&ha({t:"health",data:{unhealthy:!0,isDead:!0}})};Ia.onmessage=function(Pa){Pa&&Pa.data&&(Pa=JSON.parse(Pa.data),Pa.hb?ba({hb:!0}):Pa.end?close():ha(Pa))}}catch(Pa){ua.reject(Pa),ua=null}return Ea.promise}function h(){fa&&ha&&r(ha);return z.promise}var z=window.createPromiseCapability(),ca=null,ha,ea,ia=null,fa=!1,pa=!1,wa=n,ka=
function(va){var sa=va.indexOf("://"),xa="ws://";0>sa?sa=0:(5===sa&&(xa="wss://"),sa+=3);var za=va.lastIndexOf("/");0>za&&(za=va.length);return xa+va.slice(sa,za)}(b);return{send:ba,gD:r,Oz:function(){return ca?ca.promise:h().then(function(va){ca=window.createPromiseCapability();ha=null;va.close();return ca.promise})}}}function e(b){var n=b.lastIndexOf("/");0>n&&(n=b.length);return b.slice(0,n)}return window.WebSocket&&!f?a(x,w):function(b,n){function ba(va){(ia?ia.promise:Promise.resolve(ea)).then(function(sa){var xa=
new XMLHttpRequest,za=ha?ca+"/"+ha+"pf":ca+"/pf";za=Object(y.a)(za)+"&id="+sa;sa=new FormData;sa.append("data",JSON.stringify(va));xa.open("POST",za);xa.withCredentials=!0;xa.send(sa)})}function r(){ea=0;ia||(ia=window.createPromiseCapability())}function h(){z=new XMLHttpRequest;var va=ca+"/pf";va+=0!==ea?"?id="+ea+"&uc="+ka:"?uc="+ka;ka++;z.open("GET",va,!0);z.withCredentials=!0;z.setRequestHeader("Cache-Control","no-cache");z.setRequestHeader("X-Requested-With","XMLHttpRequest");var sa=z,xa=!1;
z.onreadystatechange=function(){a:if(3<=sa.readyState&&!xa){try{var za=sa.responseText.length}catch(Ea){Object(ja.g)("caught exception");break a}if(0<za)try{var ua=sa.responseText.split("\n");for(ua[ua.length-1]&&ua.pop();0<ua.length&&3>ua[ua.length-1].length;)"]"===ua.pop()&&r();0<ua.length&&3>ua[0].length&&ua.shift();for(za=0;za<ua.length;++za)ua[za].endsWith(",")&&(ua[za]=ua[za].substr(0,ua[za].length-1));0===ea&&0<ua.length&&(ea=JSON.parse(ua.shift()).id,za=ia,ia=null,za.resolve(ea));var Aa;for(za=
0;za<ua.length;++za)(Aa=JSON.parse(ua[za]))&&Aa.end?close():Aa&&Aa.hb&&Aa.id===ea?ba({hb:!0}):wa(Aa)}catch(Ea){}fa||(xa=!0,h())}};z.send()}var z,ca=e(b),ha=n,ea=0,ia=window.createPromiseCapability(),fa=!1,pa=null,wa=null,ka=0;return{send:ba,gD:function(va,sa,xa){wa=va;pa=xa;fa=!1;r();h();sa&&sa();return Promise.resolve()},Oz:function(){r();wa=null;fa=!0;pa&&pa();z.abort();return Promise.resolve()}}}(x,w)}aa.d(ta,"a",function(){return oa});var ja=aa(1),la=aa(32),da=aa(35),y=aa(119)}}]);}).call(this || window)
